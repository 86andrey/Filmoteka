const e=new class{async fetchPopular(){try{const e=`https://api.themoviedb.org/3/trending/movie/day?api_key=03779c52c93ea63ebe46db37a334d7d8&page=${this.page}`,t=await fetch(e),a=await t.json();return console.log(a),a.results}catch(e){console.log(e)}}async fetchByQuery(e){try{const t=`https://api.themoviedb.org/3/search/movie?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US&query=${e}&page=${this.page}&include_adult=false`,a=await fetch(t);return(await a.json()).results}catch(e){console.log(e)}}async getGenres(){try{const e="https://api.themoviedb.org/3/genre/movie/list?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US",t=await fetch(e),a=await t.json();return console.log(a.genres),a.genres}catch(e){console.log(e)}}async getCountByQuery(e){try{const t=`https://api.themoviedb.org/3/search/movie?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US&query=${e}&include_adult=false`,a=await fetch(t);return(await a.json()).total_results}catch(e){console.log(e)}}async fetchById(e){try{const t=`https://api.themoviedb.org/3/movie/${e}?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US`,a=await fetch(t);return await a.json()}catch(e){console.log(e)}}setCurrentPage(e){this.page=e}incrementPage(){this.page+=1}resetPage(){this.page=1}constructor(){this.searchQuery="",this.page=1}},t=document.querySelector(".container-card"),a=document.querySelector(".modal__card-content");async function n(a){const n=await e.fetchByQuery(a);t.innerHTML=await s(n)}function s(e){return e.map((({poster_path:e,id:t,original_title:a,release_date:n,genre_ids:s})=>`\n                  <div class="container-card_single-card" data-id="${t}" >\n                    <div class="poster">\n                        <img src="https://image.tmdb.org/t/p/w500${e}" alt="${a}">\n                    </div>\n                    <div class="info">\n                      <h3 class="info_title">${a}</h3>\n                      <p class="info_details">\n                          ${s} | ${n}\n                      </p>\n                    </div>\n                  </div> \n        `)).join("")}async function o(t){const n=await e.fetchById(t);a.innerHTML=await function({poster_path:e,id:t,original_title:a,release_date:n,genre_ids:s}){return`\n    <button type="button" class="modal__close" data-modal-close>\n    X\n    \x3c!-- data-modal-btn --\x3e\n    \x3c!-- <svg class="modal__close-svg" data-modal-svg>\n      <use href="./images/icons.svg#icon-group"></use>\n    </svg> --\x3e\n  </button>\n  <img src="https://image.tmdb.org/t/p/w500${e}" alt="${a} class="modal__img" />\n  <div class="modal__info">\n    <h2 class="modal__info-title">${a}</h2>\n    <ul class="modal__info discription__modal">\n      <li class="discription__modal-item">\n        <p class="discription__modal-title">Vote / Votes</p>\n        <p class="discription__modal-text"><span>7.3</span> / 1260</p>\n      </li>\n      <li class="discription__modal-item">\n        <p class="discription__modal-title">Popularity</p>\n        <p class="discription__modal-text">100.2</p>\n      </li>\n      <li class="discription__modal-item">\n        <p class="discription__modal-title">Original Title</p>\n        <p class="discription__modal-text">${a}</p>\n      </li>\n      <li class="discription__modal-item">\n        <p class="discription__modal-title">Genre</p>\n        <p class="discription__modal-text"> ${s}</p>\n      </li>\n    </ul>\n    <div class="modal__info about__modal">\n      <h4 class="about__modal-title">About</h4>\n      <p class="about__modal-text">\n        Four of the Wests most infamous outlaws assemble to steal a huge\n        stash of gold from the most corrupt settlement of the gold rush towns.\n        But not all goes to plan one is killed and the other three escapes\n        with bags of gold e out in the abandoned gold mine where they\n        happen across another gang of three – who themselves were planning to\n        hit the very same bank! As tensions rise, things go from bad to worse\n        as they realise the bags of gold are filled with lead... theyve been\n        double crossed – but by who and how?\n      </p>\n    </div>\n    <div class="modal__button">\n      <button type="button" class="modal__btn-add">add to Watched</button>\n      <button type="button" class="modal__btn-add">add to queue</button>\n    </div>\n  </div>`}(n);const s=document.querySelector(".modal__close"),o=document.querySelector(".modal__card-overlay");s.addEventListener("click",(()=>{o.classList.add("is-hidden")}))}const i={watchBtn:document.querySelector("#header-watched-button"),queueBtn:document.querySelector("#header-queue-button")};i.watchBtn.addEventListener("click",(function(e){i.watchBtn.classList.contains("is-header-nonactive")&&(i.watchBtn.classList.remove("is-header-nonactive"),i.watchBtn.classList.add("is-header-active"),i.queueBtn.classList.remove("is-header-active"),i.queueBtn.classList.add("is-header-nonactive"))})),i.queueBtn.addEventListener("click",(function(e){i.queueBtn.classList.contains("is-header-nonactive")&&(i.queueBtn.classList.remove("is-header-nonactive"),i.queueBtn.classList.add("is-header-active"),i.watchBtn.classList.remove("is-header-active"),i.watchBtn.classList.add("is-header-nonactive"))}));const c=document.querySelector(".header-input-container"),d=document.querySelector("#search-box");c.addEventListener("submit",(function(e){try{e.preventDefault(),searchQuery=d.value,""===searchQuery&&console.log("надо ввести фильм"),n(searchQuery)}catch{}})),async function(){const a=await e.fetchPopular();t.insertAdjacentHTML("beforeend",s(a))}();const l=document.querySelector(".modal__card-overlay");document.querySelector(".container-card").addEventListener("click",(e=>{const t=e.path[2];if(!t.classList.contains("container-card_single-card"))return;l.classList.remove("is-hidden");o(t.dataset.id)}));
//# sourceMappingURL=index.ba4b82c3.js.map
