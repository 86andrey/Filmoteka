function e(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},t.parcelRequired7c6=i),i.register("68O3z",(function(t,n){e(t.exports,"default",(function(){return a}));class a{async fetchPopular(){try{const e=`https://api.themoviedb.org/3/trending/movie/day?api_key=03779c52c93ea63ebe46db37a334d7d8&page=${this.page}`,t=await fetch(e),n=await t.json();return console.log(n),n.results}catch(e){console.log(e)}}async fetchByQuery(e){try{const t=`https://api.themoviedb.org/3/search/movie?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US&query=${e}&page=${this.page}&include_adult=false`,n=await fetch(t);return(await n.json()).results}catch(e){console.log(e)}}async getGenres(){try{const e="https://api.themoviedb.org/3/genre/movie/list?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US",t=await fetch(e),n=await t.json();return console.log(n),n}catch(e){console.log(e)}}async getCountByQuery(e){try{const t=`https://api.themoviedb.org/3/search/movie?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US&query=${e}&include_adult=false`,n=await fetch(t);return(await n.json()).total_results}catch(e){console.log(e)}}async fetchById(e){try{const t=`https://api.themoviedb.org/3/movie/${e}?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US`,n=await fetch(t);return await n.json()}catch(e){console.log(e)}}setCurrentPage(e){this.page=e}incrementPage(){this.page+=1}resetPage(){this.page=1}constructor(){this.searchQuery="",this.page=1}}})),i.register("bYdoQ",(function(t,n){e(t.exports,"renderMarkupPopular",(function(){return r})),e(t.exports,"renderMarkupByQ",(function(){return m})),e(t.exports,"makeMarkupLib",(function(){return p})),e(t.exports,"openModal",(function(){return _}));var a=i("68O3z"),s=i("5uEKZ");const o=new(0,a.default),d=document.querySelector(".container-card"),c=document.querySelector(".modal__card-content"),l=document.querySelector(".header-error-container");async function r(){const e=await o.fetchPopular();console.log(e),d.insertAdjacentHTML("beforeend",u(e))}async function m(e){try{const t=await o.fetchByQuery(e);0===t.length&&h(),console.log(t.length),d.innerHTML=await u(t)}catch(e){h()}}function u(e){return e.map((({poster_path:e,id:t,original_title:n,release_date:a,genre_ids:i})=>{const s=a.split("-")[0],o=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],d=i.reduce(((e,t)=>{const n=o.filter((e=>e.id===t))[0];return e.push(n.name),e.slice(0,3)}),[]);return 3===d.length&&d.splice(2,1,"Other"),`\n                  <div class="container-card_single-card" data-id="${t}" >\n                    <div class="poster">\n                        <img src="https://image.tmdb.org/t/p/w500${e}" alt="${n}">\n                    </div>\n                    <div class="info">\n                      <h3 class="info_title">${n}</h3>\n                      <p class="info_details">\n                          ${d.join(", ")} | ${s}\n                      </p>\n                    </div>\n                  </div> \n        `})).join("")}async function p(e){return e.map((({poster_path:e,id:t,original_title:n,release_date:a,genres:i})=>{const s=a.split("-")[0],o=i.flatMap((e=>e.name)).slice(0,3);return console.log(o),o.slice(0,3),3===o.length&&o.splice(2,1,"Other"),`\n                  <div class="container-card_single-card" data-id="${t}" >\n                    <div class="poster">\n                        <img src="https://image.tmdb.org/t/p/w500${e}" alt="${n}">\n                    </div>\n                    <div class="info">\n                      <h3 class="info_title">${n}</h3>\n                      <p class="info_details">\n                          ${o.join(", ")} | ${s}\n                      </p>\n                    </div>\n                  </div> \n        `})).join("")}async function _(e){const t=await o.fetchById(e);c.innerHTML=await function({poster_path:e,original_title:t,overview:n,popularity:a,genres:i,vote_average:s,vote_count:o}){const d=i.flatMap((e=>e.name)).slice(0,3);return d.slice(0,3),`\n    <button type="button" class="modal__close" data-modal-close>\n      <svg class="modal__close-svg">\n        X\n      </svg>\n    </button>\n  <img src="https://image.tmdb.org/t/p/w500${e}" alt="${t}" class="modal__img" />\n  <div class="modal__info">\n    <h2 class="modal__info-title">${t}</h2>\n    <div class="modal__info-block">\n      <ul class="modal__info discription__modal">\n        <li class="discription__modal-item">\n          <p class="discription__modal-title">Vote / Votes</p>\n        </li>\n        <li class="discription__modal-item">\n          <p class="discription__modal-title">Popularity</p>\n        </li>\n        <li class="discription__modal-item">\n          <p class="discription__modal-title">Original Title</p>\n        </li>\n        <li class="discription__modal-item">\n          <p class="discription__modal-title">Genre</p>\n        </li>\n      </ul>\n      \n      <ul class="modal__info">\n        <li class="discription__modal-item">\n          <p class="discription__modal-text">\n          <span class="discription__modal-text-vote">${s}</span>\n          <span class="discription__modal-text-slash">/</span>\n          <span class="discription__modal-text-votes">${o}</span>\n          </p>\n        </li>\n        <li class="discription__modal-item">\n          <p class="discription__modal-text">${a.toFixed(1)}</p>\n        </li>\n        <li class="discription__modal-item">\n          <p class="discription__modal-text">${t}</p>\n        </li>\n        <li class="discription__modal-item">\n          <p class="discription__modal-text">${d} </p>\n        </li>\n      </ul>\n    </div>\n    <div class="modal__info about__modal">\n      <h4 class="about__modal-title">About</h4>\n      <p class="about__modal-text">${n}</p>\n    </div>\n    <div class="modal__button">\n      <button type="button" class="modal__btn-add modal__btn-1add">add to Watched</button>\n      <button type="button" class="modal__btn-add modal__btn-1remove hide-btn">remove from Watched</button>\n      <button type="button" class="modal__btn-add modal__btn-2add">add to queue</button>\n      <button type="button" class="modal__btn-add modal__btn-2remove hide-btn">remove from queue</button>\n    </div>\n  </div>`}(t);const n=document.querySelector(".modal__close"),a=document.querySelector(".modal__card-overlay");n.addEventListener("click",(()=>{a.classList.add("is-hidden")}));const i=document.querySelector(".modal__btn-1add"),d=document.querySelector(".modal__btn-2add"),l=document.querySelector(".modal__btn-1remove"),r=document.querySelector(".modal__btn-2remove");!async function(){const t=await o.fetchById(e),n=s.storage.readItem("qu");if(n){const e=t.title;n.findIndex((t=>t.title===e))>=0?(d.classList.add("hide-btn"),r.classList.remove("hide-btn")):n===[]&&(r.classList.add("hide-btn"),d.classList.remove("hide-btn"))}}(),async function(){const t=await o.fetchById(e),n=s.storage.readItem("watched");if(n){const e=t.title;n.findIndex((t=>t.title===e))>=0?(i.classList.add("hide-btn"),l.classList.remove("hide-btn")):n===[]&&(l.classList.add("hide-btn"),i.classList.remove("hide-btn"))}}(),i.addEventListener("click",(async()=>{const t=await o.fetchById(e),n=s.storage.readItem("watched",[]),a=s.storage.readItem("qu");if(a){const e=t.title,i=a.findIndex((t=>t.title===e));if(i>=0){a.splice(i,1);s.storage.addItem("qu",a),n.push(t),s.storage.addItem("watched",n)}else-1===i&&(n.push(t),s.storage.addItem("watched",n))}else n.push(t),s.storage.addItem("watched",n);i.classList.add("hide-btn"),l.classList.remove("hide-btn"),r.classList.add("hide-btn"),d.classList.remove("hide-btn")})),d.addEventListener("click",(async()=>{const t=await o.fetchById(e),n=s.storage.readItem("qu",[]),a=s.storage.readItem("watched");if(a){const e=t.title,i=a.findIndex((t=>t.title===e));if(i>=0){a.splice(i,1);s.storage.addItem("watched",a),n.push(t),s.storage.addItem("qu",n)}else-1===i&&(n.push(t),s.storage.addItem("qu",n))}else n.push(t),s.storage.addItem("qu",n);d.classList.add("hide-btn"),r.classList.remove("hide-btn"),l.classList.add("hide-btn"),i.classList.remove("hide-btn")})),l.addEventListener("click",(()=>{const e=s.storage.readItem("watched"),n=t.title,a=e.findIndex((e=>e.title===n));if(-1===a)console.log("error");else{e.splice(a,1);s.storage.addItem("watched",e)}l.classList.add("hide-btn"),i.classList.remove("hide-btn")})),r.addEventListener("click",(()=>{const e=s.storage.readItem("qu"),n=t.title,a=e.findIndex((e=>e.title===n));if(-1===a)console.log("error");else{e.splice(a,1);s.storage.addItem("qu",e)}r.classList.add("hide-btn"),d.classList.remove("hide-btn")}))}function h(){l.classList.remove("is-hidden"),setTimeout((()=>{l.classList.add("is-hidden")}),2e3)}})),i.register("5uEKZ",(function(t,n){e(t.exports,"storage",(function(){return a}));const a={readItem(e,t){try{const n=JSON.parse(localStorage.getItem(e));return n||t}catch(e){return null}},addItem(e,t){localStorage.setItem(e,JSON.stringify(t))}}}));
//# sourceMappingURL=index.7dbd7391.js.map
