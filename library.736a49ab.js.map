{"mappings":"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","sources":["src/js/library.js"],"sourcesContent":["import { storage } from './storage';\nimport { trackScroll } from './btm-to-top';\nimport throttle from 'lodash.throttle';\n\nimport { makeMarkupLib } from './renderFunctions';\nimport { openModal } from './renderFunctions';\nimport { WhiteColor } from \"./renderFunctions\"\nimport { BlackColor } from \"./renderFunctions\"\n// import './btm-to-top';\nimport {\n  createPagination,\n  paginationSettings,\n  addPageToArray,\n} from './pagination';\nimport { WATCHED_SEARCH_TYPE, QUEUE_SEARCH_TYPE } from './searchTypes';\n\n// import { onBackdropClick, toogleSliderHandler, onEscKeyPress } from './modalFooter';\nimport '../js/modalFooter';\n// import Swiper from './modalFooter';\nconst goTopBtn = document.querySelector('.back_to_top');\n// console.log(goTopBtn);\n\nwindow.addEventListener('scroll', throttle(trackScroll, 500));\nconst parsing = storage.readItem('watched');\nconst refs = {\n  watchBtn: document.querySelector('#header-watched-button'),\n  queueBtn: document.querySelector('#header-queue-button'),\n};\nconst modal = document.querySelector('.modal__card-overlay');\nconst containerCard = document.querySelector('.container-card');\nconst containerPlaceholder = document.querySelector('.container-placeholder');\n\n// =========Открытие модалки==========\ncontainerCard.addEventListener('click', event => {\n  const movieClick = event.path[2];\n  if (!movieClick.classList.contains('container-card_single-card')) {\n    return;\n  }\n  modal.classList.remove('is-hidden');\n  const movieId = movieClick.dataset.id;\n  openModal(movieId);\n});\n\n//============Рендер просмотренного (по дефолту)===============\nrenderWatched();\nasync function renderWatched() {\n  const parsing = storage.readItem('watched');\n  if (parsing) {\n    const parsingPage = addPageToArray(1, parsing);\n    console.log(parsingPage);\n    if (parsingPage.total_results > 20) {\n      createPagination(parsingPage);\n\n      paginationSettings.searchType = WATCHED_SEARCH_TYPE;\n    }\n\n    if (parsingPage.results.length < 21) {\n      containerCard.innerHTML = await makeMarkupLib(parsingPage.results);\n         const darkTheme = localStorage.getItem(\"theme\")\n  if (darkTheme) {\n            WhiteColor()\n  } else {\n    BlackColor()\n        }\n    }\n    if (parsingPage.results.length !== 0) {\n      containerPlaceholder.classList.add('visually-hidden');\n    }\n    if (parsingPage.results.length === 0) {\n      containerPlaceholder.classList.remove('visually-hidden');\n    }\n  }\n}\n\n//============Рендер просмотренного (по кнопке в хедере)===============\nrefs.watchBtn.addEventListener('click', async () => {\n  const parsing = storage.readItem('watched');\n  if (parsing) {\n    const parsingPage = addPageToArray(1, parsing);\n\n    if (parsingPage.total_results > 20) {\n      createPagination(parsingPage);\n\n      paginationSettings.searchType = WATCHED_SEARCH_TYPE;\n    }\n    if (parsingPage.results.length < 21) {\n      containerCard.innerHTML = await makeMarkupLib(parsingPage.results);\n        const darkTheme = localStorage.getItem(\"theme\")\n  if (darkTheme) {\n            WhiteColor()\n  } else {\n    BlackColor()\n        }\n    }\n    if (parsingPage.results.length !== 0) {\n      containerPlaceholder.classList.add('visually-hidden');\n    }\n    if (parsingPage.results.length === 0) {\n      containerPlaceholder.classList.remove('visually-hidden');\n    }\n  }\n\n  onWatchBtnClick();\n});\n\n//============Рендер очереди (по кнопке в хедере)===============\nrefs.queueBtn.addEventListener('click', async () => {\n  const parsing = storage.readItem('qu');\n  if (parsing) {\n    const paginationEl = document.querySelector('#tui-pagination-container');\n    const parsingPage = addPageToArray(1, parsing);\n    paginationEl.innerHTML = '';\n\n    if (parsingPage.total_results > 20) {\n      createPagination(parsingPage);\n      paginationSettings.searchType = QUEUE_SEARCH_TYPE;\n    }\n\n    if (parsingPage.results.length < 21) {\n      containerCard.innerHTML = await makeMarkupLib(parsingPage.results);\n        const darkTheme = localStorage.getItem(\"theme\")\n  if (darkTheme) {\n            WhiteColor()\n  } else {\n    BlackColor()\n        }\n    }\n\n    if (parsingPage.results.length !== 0) {\n      containerPlaceholder.classList.add('visually-hidden');\n    }\n    if (parsingPage.results.length === 0) {\n      containerPlaceholder.classList.remove('visually-hidden');\n    }\n  }\n\n  onQueueBtnClick();\n});\n\n//============Смена стилей кнопок в хедере при клике на просмотренные===============\nfunction onWatchBtnClick() {\n  if (refs.watchBtn.classList.contains('is-header-nonactive')) {\n    refs.watchBtn.classList.remove('is-header-nonactive');\n    refs.watchBtn.classList.add('is-header-active');\n    refs.queueBtn.classList.remove('is-header-active');\n    refs.queueBtn.classList.add('is-header-nonactive');\n\n    // вызов функции обновления контента страницы\n  }\n}\n\n//============Смена стилей кнопок в хедере при клике на очередь===============\nfunction onQueueBtnClick() {\n  if (refs.queueBtn.classList.contains('is-header-nonactive')) {\n    refs.queueBtn.classList.remove('is-header-nonactive');\n    refs.queueBtn.classList.add('is-header-active');\n    refs.watchBtn.classList.remove('is-header-active');\n    refs.watchBtn.classList.add('is-header-nonactive');\n\n    // вызов функции обновления контента страницы\n  }\n}\n\n// До мене\n\n// renderWatched();\n// async function renderWatched() {\n//   const parsing = storage.readItem('watched');\n//   if (parsing) {\n//     containerCard.innerHTML = await makeMarkupLib(parsing);\n//   }\n// }\n// refs.watchBtn.addEventListener('click', async () => {\n//   const parsing = storage.readItem('watched');\n//   console.log(parsing);\n//   if (parsing) {\n//     containerCard.innerHTML = '';\n//     containerCard.innerHTML = await makeMarkupLib(parsing);\n//   } else {\n//     containerCard.innerHTML = 'List is empty';\n//   }\n//   onWatchBtnClick();\n// });\n\n// refs.queueBtn.addEventListener('click', async () => {\n//   const parsing = storage.readItem('qu');\n//   if (parsing) {\n//     containerCard.innerHTML = '';\n//     containerCard.innerHTML = await makeMarkupLib(parsing);\n//   } else {\n//     containerCard.innerHTML = 'List is empty';\n//   }\n//   onQueueBtnClick();\n// });\n\nconst swiper = new Swiper();\n"],"names":["$bpxeT","parcelRequire","document","querySelector","window","addEventListener","$parcel$interopDefault","$dCfNN","$98tAT","trackScroll","$jzQFI","storage","readItem","$93effc6fc56091ad$var$refs","watchBtn","queueBtn","$93effc6fc56091ad$var$modal","$93effc6fc56091ad$var$containerCard","$93effc6fc56091ad$var$containerPlaceholder","$93effc6fc56091ad$var$_renderWatched","$2TvXO","mark","_callee","parsing1","parsingPage","$jcFG7","addPageToArray","console","log","total_results","createPagination","paginationSettings","searchType","$kpqGT","WATCHED_SEARCH_TYPE","results","length","$2eFBA","makeMarkupLib","innerHTML","_ctx","sent","localStorage","getItem","WhiteColor","BlackColor","classList","add","remove","apply","this","arguments","$93effc6fc56091ad$var$onWatchBtnClick","contains","$93effc6fc56091ad$var$onQueueBtnClick","event","movieClick","path","movieId","dataset","id","openModal","$93effc6fc56091ad$var$renderWatched","parsing2","parsing3","paginationEl","QUEUE_SEARCH_TYPE","Swiper"],"version":3,"file":"library.736a49ab.js.map"}