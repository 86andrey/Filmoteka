function e(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){i[e]=t},t.parcelRequired7c6=a),a.register("68O3z",(function(t,n){e(t.exports,"default",(function(){return o}));var i=a("dCvm9"),s=a("04jNI");class o{async fetchPopular(){const e=document.querySelector(".container-card"),t=new(0,i.Spinner)(s.default).spin(e);try{const e="https://api.themoviedb.org/3/trending/movie/day?api_key=03779c52c93ea63ebe46db37a334d7d8",n=await fetch(e),i=await n.json();return t.stop(),i}catch(e){console.log(e,"fetchPopular")}}async fetchPopularPagination(e){const t=document.querySelector(".container-card"),n=new(0,i.Spinner)(s.default).spin(t);try{const t=`https://api.themoviedb.org/3/trending/movie/day?api_key=03779c52c93ea63ebe46db37a334d7d8&page=${e}`,i=await fetch(t),a=await i.json();return n.stop(),a}catch(e){console.log(e,"fetchPopularPagination")}}async fetchByQuery(e){const t=document.querySelector(".container-card"),n=new(0,i.Spinner)(s.default).spin(t);try{const t=`https://api.themoviedb.org/3/search/movie?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US&query=${e}&include_adult=false`,i=await fetch(t),a=await i.json();return n.stop(),a}catch(e){console.log(e)}}async fetchByQueryPagination(e,t){const n=document.querySelector(".container-card"),a=new(0,i.Spinner)(s.default).spin(n);try{const n=`https://api.themoviedb.org/3/search/movie?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US&query=${e}&page=${t}&include_adult=false`,i=await fetch(n),s=await i.json();return a.stop(),s}catch(e){console.log(e)}}async getGenres(){try{const e="https://api.themoviedb.org/3/genre/movie/list?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US",t=await fetch(e),n=await t.json();return console.log(n),n}catch(e){console.log(e)}}async getCountByQuery(e){try{const t=`https://api.themoviedb.org/3/search/movie?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US&query=${e}&include_adult=false`,n=await fetch(t);return(await n.json()).total_results}catch(e){console.log(e)}}async fetchById(e){try{const t=`https://api.themoviedb.org/3/movie/${e}?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US`,n=await fetch(t);return await n.json()}catch(e){console.log(e)}}setCurrentPage(e){this.page=e}incrementPage(){this.page+=1}resetPage(){this.page=1}constructor(){this.searchQuery=""}}})),a.register("dCvm9",(function(t,n){e(t.exports,"Spinner",(function(){return s}),(function(e){return s=e}));var i=function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},a={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},s=function(){function e(e){void 0===e&&(e={}),this.opts=i(i({},a),e)}return e.prototype.spin=function(e){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),o(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),e&&e.insertBefore(this.el,e.firstChild||null),function(e,t){var n=Math.round(t.corners*t.width*500)/1e3+"px",i="none";!0===t.shadow?i="0 2px 4px #000":"string"==typeof t.shadow&&(i=t.shadow);for(var a=function(e){for(var t=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,n=[],i=0,a=e.split(",");i<a.length;i++){var s=a[i].match(t);if(null!==s){var o=+s[2],r=+s[5],d=s[4],c=s[7];0!==o||d||(d=c),0!==r||c||(c=d),d===c&&n.push({prefix:s[1]||"",x:o,y:r,xUnits:d,yUnits:c,end:s[8]})}}return n}(i),s=0;s<t.lines;s++){var c=~~(360/t.lines*s+t.rotate),l=o(document.createElement("div"),{position:"absolute",top:-t.width/2+"px",width:t.length+t.width+"px",height:t.width+"px",background:r(t.fadeColor,s),borderRadius:n,transformOrigin:"left",transform:"rotate("+c+"deg) translateX("+t.radius+"px)"}),u=s*t.direction/t.lines/t.speed;u-=1/t.speed;var p=o(document.createElement("div"),{width:"100%",height:"100%",background:r(t.color,s),borderRadius:n,boxShadow:d(a,c),animation:1/t.speed+"s linear "+u+"s infinite "+t.animation});l.appendChild(p),e.appendChild(l)}}(this.el,this.opts),this},e.prototype.stop=function(){return this.el&&("undefined"!=typeof requestAnimationFrame?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},e}();function o(e,t){for(var n in t)e.style[n]=t[n];return e}function r(e,t){return"string"==typeof e?e:e[t%e.length]}function d(e,t){for(var n=[],i=0,a=e;i<a.length;i++){var s=a[i],o=c(s.x,s.y,t);n.push(s.prefix+o[0]+s.xUnits+" "+o[1]+s.yUnits+s.end)}return n.join(", ")}function c(e,t,n){var i=n*Math.PI/180,a=Math.sin(i),s=Math.cos(i);return[Math.round(1e3*(e*s+t*a))/1e3,Math.round(1e3*(-e*a+t*s))/1e3]}})),a.register("04jNI",(function(t,n){e(t.exports,"default",(function(){return i}));var i={lines:13,length:38,width:17,radius:45,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-fade-quick",direction:1,color:"#FF6B08",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"fixed"}})),a.register("bYdoQ",(function(t,n){e(t.exports,"renderMarkup",(function(){return l})),e(t.exports,"makeMarkupLib",(function(){return u})),e(t.exports,"openModal",(function(){return p})),e(t.exports,"showRequestError",(function(){return m}));var i=a("68O3z"),s=a("5uEKZ");const o=new(0,i.default),r=document.querySelector(".container-card"),d=document.querySelector(".modal__card-content"),c=document.querySelector(".header-error-container");async function l(e){var t;console.log(e),r.innerHTML=await(t=e.results,t.map((({poster_path:e,id:t,original_title:n,release_date:i,genre_ids:a})=>{const s=i.split("-")[0],o=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}];console.log(typeof e);const r=a.reduce(((e,t)=>{const n=o.filter((e=>e.id===t))[0];return e.push(n.name),e.slice(0,3)}),[]);return 3===r.length&&r.splice(2,1,"Other"),null===e?`\n                  <div class="container-card_single-card" data-id="${t}" >\n                    \n                      <div class="poster">\n                          <img class="poster_img" src="https://img.freepik.com/premium-photo/concept-cinema-accessories-against-dark-wooden-background_185193-61023.jpg?w=740" alt="${n}">\n                      </div>\n                      <div class="info">\n                        <h3 class="info_title">${n}</h3>\n                        <p class="info_details">\n                            ${r.join(", ")} | ${s}\n                        </p>\n                      </div>\n                    \n                  </div> \n        `:`\n                  <div class="container-card_single-card" data-id="${t}" >\n                    \n                      <div class="poster">\n                          <img class="poster_img" src="https://image.tmdb.org/t/p/w500${e}" alt="${n}">\n                      </div>\n                      <div class="info">\n                        <h3 class="info_title">${n}</h3>\n                        <p class="info_details">\n                            ${r.join(", ")} | ${s}\n                        </p>\n                      </div>\n                    \n                  </div> \n        `})).join(""))}async function u(e){return e.map((({poster_path:e,id:t,original_title:n,release_date:i,genres:a})=>{const s=i.split("-")[0],o=a.flatMap((e=>e.name)).slice(0,3);return console.log(o),3===o.length&&o.splice(2,1,"Other"),`\n                  <div class="container-card_single-card" data-id="${t}" >\n                    <div class="poster">\n                        <img src="https://image.tmdb.org/t/p/w500${e}" alt="${n}">\n                    </div>\n                    <div class="info">\n                      <h3 class="info_title">${n}</h3>\n                      <p class="info_details">\n                          ${o.join(", ")} | ${s}\n                      </p>\n                    </div>\n                  </div> \n        `})).join("")}async function p(e){const t=await o.fetchById(e);d.innerHTML=await function({poster_path:e,original_title:t,overview:n,popularity:i,genres:a,vote_average:s,vote_count:o}){const r=a.flatMap((e=>e.name)).slice(0,3);return r.slice(0,3),`\n    <button type="button" class="modal__close" data-modal-close>\n      <svg class="icon modal-close-btn__icon" width="16" height="16">\n          <use href="/src/images/icons.svg#icon-X"\n      </svg>\n    </button>\n  <img src="https://image.tmdb.org/t/p/w500${e}" alt="${t}" class="modal__img" />\n  <div class="modal__info">\n    <h2 class="modal__info-title">${t}</h2>\n    <div class="modal__info-block">\n      <ul class="modal__info discription__modal">\n        <li class="discription__modal-item">\n          <h4 class="discription__modal-title">Vote / Votes</h4>\n          <p class="discription__modal-text">\n            <span class="discription__modal-text-vote">${s}</span>\n            <span class="discription__modal-text-slash">/</span>\n            <span class="discription__modal-text-votes">${o}</span>\n          </p>\n        </li>\n        <li class="discription__modal-item">\n          <h4 class="discription__modal-title">Popularity</h4>\n          <p class="discription__modal-text">${i.toFixed(1)}</p>\n        </li>\n        <li class="discription__modal-item">\n          <h4 class="discription__modal-title">Original Title</h4>\n          <p class="discription__modal-text">${t}</p>\n        </li>\n        <li class="discription__modal-item">\n          <h4 class="discription__modal-title">Genre</h4>\n          <p class="discription__modal-text">${r.join(", ")}</p>\n        </li>\n      </ul>\n    </div>\n    <div class="modal__info about__modal">\n      <h4 class="about__modal-title">About</h4>\n      <p class="about__modal-text">${n}</p>\n    </div>\n    <div class="modal__button">\n      <button type="button" class="modal__btn-add modal__btn-1add">add to Watched</button>\n      <button type="button" class="modal__btn-add modal__btn-1remove hide-btn">remove from Watched</button>\n      <button type="button" class="modal__btn-add modal__btn-2add">add to queue</button>\n      <button type="button" class="modal__btn-add modal__btn-2remove hide-btn">remove from queue</button>\n    </div>\n  </div>`}(t);const n=document.querySelector(".modal__close"),i=document.querySelector(".modal__card-overlay");n.addEventListener("click",(function e(){n.removeEventListener("click",e),i.classList.add("is-hidden")})),i.addEventListener("click",(function e(t){t.target===i&&(i.removeEventListener("click",e),i.classList.add("is-hidden"))})),window.addEventListener("keydown",(function e(t){27===t.keyCode&&(window.removeEventListener("keydown",e),i.classList.add("is-hidden"))}));const a=document.querySelector(".modal__btn-1add"),r=document.querySelector(".modal__btn-2add"),c=document.querySelector(".modal__btn-1remove"),l=document.querySelector(".modal__btn-2remove");!async function(){const t=await o.fetchById(e),n=s.storage.readItem("qu");if(n){const e=t.title;n.findIndex((t=>t.title===e))>=0?(r.classList.add("hide-btn"),l.classList.remove("hide-btn")):n===[]&&(l.classList.add("hide-btn"),r.classList.remove("hide-btn"))}}(),async function(){const t=await o.fetchById(e),n=s.storage.readItem("watched");if(n){const e=t.title;n.findIndex((t=>t.title===e))>=0?(a.classList.add("hide-btn"),c.classList.remove("hide-btn")):n===[]&&(c.classList.add("hide-btn"),a.classList.remove("hide-btn"))}}(),a.addEventListener("click",(async()=>{const t=await o.fetchById(e),n=s.storage.readItem("watched",[]),i=s.storage.readItem("qu");if(i){const e=t.title,a=i.findIndex((t=>t.title===e));if(a>=0){i.splice(a,1);s.storage.addItem("qu",i),n.push(t),s.storage.addItem("watched",n)}else-1===a&&(n.push(t),s.storage.addItem("watched",n))}else n.push(t),s.storage.addItem("watched",n);a.classList.add("hide-btn"),c.classList.remove("hide-btn"),l.classList.add("hide-btn"),r.classList.remove("hide-btn")})),r.addEventListener("click",(async()=>{const t=await o.fetchById(e),n=s.storage.readItem("qu",[]),i=s.storage.readItem("watched");if(i){const e=t.title,a=i.findIndex((t=>t.title===e));if(a>=0){i.splice(a,1);s.storage.addItem("watched",i),n.push(t),s.storage.addItem("qu",n)}else-1===a&&(n.push(t),s.storage.addItem("qu",n))}else n.push(t),s.storage.addItem("qu",n);r.classList.add("hide-btn"),l.classList.remove("hide-btn"),c.classList.add("hide-btn"),a.classList.remove("hide-btn")})),c.addEventListener("click",(async()=>{const e=s.storage.readItem("watched"),n=t.title,i=e.findIndex((e=>e.title===n));if(-1===i)console.log("error");else{e.splice(i,1);s.storage.addItem("watched",e)}c.classList.add("hide-btn"),a.classList.remove("hide-btn")})),l.addEventListener("click",(()=>{const e=s.storage.readItem("qu"),n=t.title,i=e.findIndex((e=>e.title===n));if(-1===i)console.log("error");else{e.splice(i,1);s.storage.addItem("qu",e)}l.classList.add("hide-btn"),r.classList.remove("hide-btn")}))}function m(){c.classList.remove("is-hidden"),setTimeout((()=>{c.classList.add("is-hidden")}),2e3)}})),a.register("5uEKZ",(function(t,n){e(t.exports,"storage",(function(){return i}));const i={readItem(e,t){try{const n=JSON.parse(localStorage.getItem(e));return n||t}catch(e){return null}},addItem(e,t){localStorage.setItem(e,JSON.stringify(t))}}}));
//# sourceMappingURL=index.caafe4cf.js.map
