const t=new class{async fetchPopular(){try{const t=`https://api.themoviedb.org/3/trending/movie/day?api_key=03779c52c93ea63ebe46db37a334d7d8&page=${this.page}`,e=await fetch(t),a=await e.json();return console.log(a),a.results}catch(t){console.log(t)}}async fetchByQuery(t){try{const e=`https://api.themoviedb.org/3/search/movie?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US&query=${t}&page=${this.page}&include_adult=false`,a=await fetch(e);return(await a.json()).results}catch(t){console.log(t)}}async getGenres(){try{const t="https://api.themoviedb.org/3/genre/movie/list?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US",e=await fetch(t),a=await e.json();return console.log(a.genres),a.genres}catch(t){console.log(t)}}async getCountByQuery(t){try{const e=`https://api.themoviedb.org/3/search/movie?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US&query=${t}&include_adult=false`,a=await fetch(e);return(await a.json()).total_results}catch(t){console.log(t)}}async fetchById(t){try{const e=`https://api.themoviedb.org/3/movie/${t}?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US`,a=await fetch(e);return await a.json()}catch(t){console.log(t)}}setCurrentPage(t){this.page=t}incrementPage(){this.page+=1}resetPage(){this.page=1}constructor(){this.searchQuery="",this.page=1}},e=document.querySelector(".container-card"),a=document.querySelector(".modal__card-content");async function n(a){const n=await t.fetchByQuery(a);e.innerHTML=await i(n)}function i(t){return t.map((({poster_path:t,id:e,original_title:a,release_date:n,genre_ids:i})=>`\n                  <div class="container-card_single-card" data-id="${e}" >\n                    <div class="poster">\n                        <img src="https://image.tmdb.org/t/p/w500${t}" alt="${a}">\n                    </div>\n                    <div class="info">\n                      <h3 class="info_title">${a}</h3>\n                      <p class="info_details">\n                          ${i} | ${n}\n                      </p>\n                    </div>\n                  </div> \n        `)).join("")}async function s(e){const n=await t.fetchById(e);a.innerHTML=await function({poster_path:t,original_title:e,overview:a,popularity:n,genres_name:i,vote_average:s,vote_count:o}){return`\n    <button type="button" class="modal__close" data-modal-close>\n      <svg class="modal__close-svg">\n        X\n      </svg>\n    </button>\n  <img src="https://image.tmdb.org/t/p/w500${t}" alt="${e}" class="modal__img" />\n  <div class="modal__info">\n    <h2 class="modal__info-title">${e}</h2>\n    <div class="modal__info-block">\n      <ul class="modal__info discription__modal">\n        <li class="discription__modal-item">\n          <p class="discription__modal-title">Vote / Votes</p>\n        </li>\n        <li class="discription__modal-item">\n          <p class="discription__modal-title">Popularity</p>\n        </li>\n        <li class="discription__modal-item">\n          <p class="discription__modal-title">Original Title</p>\n        </li>\n        <li class="discription__modal-item">\n          <p class="discription__modal-title">Genre</p>\n        </li>\n      </ul>\n      \n      <ul class="modal__info">\n        <li class="discription__modal-item">\n          <p class="discription__modal-text">\n          <span class="discription__modal-text-vote">${s}</span>\n          <span class="discription__modal-text-slash">/</span>\n          <span class="discription__modal-text-votes">${o}</span>\n          </p>\n        </li>\n        <li class="discription__modal-item">\n          <p class="discription__modal-text">${n.toFixed(1)}</p>\n        </li>\n        <li class="discription__modal-item">\n          <p class="discription__modal-text">${e}</p>\n        </li>\n        <li class="discription__modal-item">\n          <p class="discription__modal-text">${i} </p>\n        </li>\n      </ul>\n    </div>\n    <div class="modal__info about__modal">\n      <h4 class="about__modal-title">About</h4>\n      <p class="about__modal-text">${a}</p>\n    </div>\n    <div class="modal__button">\n      <button type="button" class="modal__btn-add modal__btn-1">add to Watched</button>\n      <button type="button" class="modal__btn-add modal__btn-2">add to queue</button>\n    </div>\n  </div>`}(n);const i=document.querySelector(".modal__close"),s=document.querySelector(".modal__card-overlay");i.addEventListener("click",(()=>{s.classList.add("is-hidden")}))}const o=document.querySelector(".header-input-container"),c=document.querySelector("#search-box");o.addEventListener("submit",(function(t){try{t.preventDefault(),searchQuery=c.value,""===searchQuery&&console.log("надо ввести фильм"),n(searchQuery)}catch{}})),async function(){const a=await t.fetchPopular();e.insertAdjacentHTML("beforeend",i(a))}();const l=document.querySelector(".modal__card-overlay");document.querySelector(".container-card").addEventListener("click",(t=>{const e=t.path[2];if(!e.classList.contains("container-card_single-card"))return;l.classList.remove("is-hidden");s(e.dataset.id)}));
//# sourceMappingURL=index.d61e1ef2.js.map
